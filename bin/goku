#!/usr/bin/env ruby     
require "fileutils"

DP="dev-packages"
CUR_WD = FileUtils.pwd
threads = []
repo_paths = []

Dir.foreach DP do |dpkg|
  next if dpkg =~ /^\.\.?$/
  repo_paths << File.expand_path(DP+"/"+dpkg)
end
repo_paths << File.expand_path("~/.kit")

threads = repo_paths.map do |p| 
  Thread.new(p) do |path|
    `cd #{path} && git pull` 
  end
end

threads.each {|t| t.join }


FileUtils.cd CUR_WD

`kit`
